{
  "always_run_in_app" : false,
  "icon" : {
    "color" : "green",
    "glyph" : "film"
  },
  "name" : "DoubanMonitor",
  "script" : "\/*\n * Author: evilbutcher\n * Github: https:\/\/github.com\/evilbutcher\n * æœ¬è„šæœ¬ä½¿ç”¨äº†@Gideon_Senkuçš„Env.scriptableï¼Œæ„Ÿè°¢ï¼\n *\/\nconst goupdate = true;\nconst $ = new importModule(\"Env\")();\nconst res = await getinfo();\n\nlet widget = createWidget(res);\nScript.setWidget(widget);\nScript.complete();\n\nfunction createWidget(res) {\n  var group = res[\"subject_collection_items\"];\n  items = [];\n  for (var i = 0; i < 6; i++) {\n    var title = group[i].title;\n    var rating = group[i].rating;\n    if (rating == null) {\n      var star = \"æš‚æ— \";\n    } else {\n      star = rating[\"star_count\"];\n    }\n    var item = title + \" \" + star + \"ğŸŒŸ\";\n    items.push(item);\n  }\n  console.log(items);\n\n  const w = new ListWidget();\n  const bgColor = new LinearGradient();\n  bgColor.colors = [new Color(\"#1c1c1c\"), new Color(\"#29323c\")];\n  bgColor.locations = [0.0, 1.0];\n  w.backgroundGradient = bgColor;\n  w.centerAlignContent();\n\n  const firstLine = w.addText(`[ğŸ“£]è±†ç“£ç”µå½±`);\n  firstLine.textSize = 12;\n  firstLine.textColor = Color.white();\n  firstLine.textOpacity = 0.7;\n\n  const top1Line = w.addText(`â€¢${items[0]}`);\n  top1Line.textSize = 12;\n  top1Line.textColor = Color.white();\n\n  const top2Line = w.addText(`â€¢${items[1]}`);\n  top2Line.textSize = 12;\n  top2Line.textColor = new Color(\"#6ef2ae\");\n\n  const top3Line = w.addText(`â€¢${items[2]}`);\n  top3Line.textSize = 12;\n  top3Line.textColor = new Color(\"#7dbbae\");\n\n  const top4Line = w.addText(`â€¢${items[3]}`);\n  top4Line.textSize = 12;\n  top4Line.textColor = new Color(\"#ff9468\");\n\n  const top5Line = w.addText(`â€¢${items[4]}`);\n  top5Line.textSize = 12;\n  top5Line.textColor = new Color(\"#ffcc66\");\n\n  const top6Line = w.addText(`â€¢${items[5]}`);\n  top6Line.textSize = 12;\n  top6Line.textColor = new Color(\"#ffa7d3\");\n  w.presentMedium();\n  return w;\n}\n\nasync function getinfo() {\n  const dbheader = {\n    Referer: `https:\/\/m.douban.com\/pwa\/cache_worker`,\n  };\n  const dbRequest = {\n    url:\n      \"https:\/\/m.douban.com\/rexxar\/api\/v2\/subject_collection\/movie_real_time_hotest\/items?start=0&count=50&items_only=1&for_mobile=1\",\n    headers: dbheader,\n  };\n\n  const res = await $.get(dbRequest);\n  log(res);\n  return res;\n}\n\n\/\/æ›´æ–°ä»£ç \nfunction update() {\n  log(\"ğŸ””æ›´æ–°è„šæœ¬å¼€å§‹!\");\n  scripts.forEach(async (script) => {\n    await $.getFile(script);\n  });\n  log(\"ğŸ””æ›´æ–°è„šæœ¬ç»“æŸ!\");\n}\n\nconst scripts = [\n  {\n    moduleName: \"DoubanMonitor\",\n    url:\n      \"https:\/\/raw.githubusercontent.com\/evilbutcher\/Scriptables\/master\/DoubanMonitor.js\",\n  },\n];\nif (goupdate == true) update();\n",
  "share_sheet_inputs" : [

  ]
}